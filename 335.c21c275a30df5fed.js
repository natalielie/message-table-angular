"use strict";(self.webpackChunkmessage_table_angular=self.webpackChunkmessage_table_angular||[]).push([[335],{7335:(et,_,s)=>{s.r(_),s.d(_,{LazyLoadingModule:()=>tt});var C=s(4190),M=s(3365),d=s(3566),c=s(5313),T=s(8645),v=s(9773),m=s(7700),l=s(6223),u=s(3338),g=s(4221);const p=(0,g.ZF)("messages"),y=(0,g.P1)(p,e=>e.messages),D=((0,g.P1)(p,e=>e.resultText),(0,g.P1)(p,e=>e));var t=s(5879),P=s(2939),h=s(6814),Z=s(2296),x=s(4170),w=s(4516),O=s(6263);const A=["messageForm"];function U(e,i){1&e&&(t.TgZ(0,"mat-error",18),t._uU(1," Title is required "),t.qZA())}function N(e,i){1&e&&(t.TgZ(0,"mat-error",18),t._uU(1," Message text is required "),t.qZA())}function B(e,i){1&e&&(t.TgZ(0,"mat-error",18),t._uU(1," Message text length should not be more than 255 symbols "),t.qZA())}function S(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",2)(1,"h1",3)(2,"strong"),t._uU(3,"New Message"),t.qZA()(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.closeDialog())}),t._uU(6,"\xd7"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.onSubmit())}),t.TgZ(10,"mat-form-field",9)(11,"mat-label"),t._uU(12,"Title"),t.qZA(),t._UZ(13,"input",10),t.YNc(14,U,2,0,"mat-error",11),t.qZA(),t.TgZ(15,"mat-form-field",12),t._UZ(16,"textarea",13,14),t.YNc(18,N,2,0,"mat-error",11),t.YNc(19,B,2,0,"mat-error",11),t.qZA(),t.TgZ(20,"div",15)(21,"button",16),t._uU(22," Submit "),t.qZA()()(),t.TgZ(23,"button",17),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.closeDialog())}),t._uU(24," Cancel "),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(9),t.Q6J("formGroup",n.messageForm),t.xp6(5),t.Q6J("ngIf",n.messageForm.controls.name.invalid&&(n.messageForm.controls.name.dirty||n.messageForm.controls.name.touched)),t.xp6(4),t.Q6J("ngIf",n.messageForm.controls.text.value.length<1&&(n.messageForm.controls.text.dirty||n.messageForm.controls.text.touched)),t.xp6(1),t.Q6J("ngIf",n.messageForm.controls.text.value.length>255&&(n.messageForm.controls.text.dirty||n.messageForm.controls.text.touched)),t.xp6(2),t.Q6J("disabled",!n.messageForm.valid)}}function k(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",19)(1,"h1",3)(2,"strong"),t._uU(3,"Delete Message"),t.qZA()(),t.TgZ(4,"div",20)(5,"p"),t._uU(6," Sure to delete "),t.TgZ(7,"b"),t._uU(8),t.qZA(),t._uU(9,"? "),t.qZA()(),t.TgZ(10,"div",21)(11,"button",22),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.deleteMessage())}),t._uU(12," Delete "),t.qZA(),t.TgZ(13,"button",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.closeDialog())}),t._uU(14,"Cancel"),t.qZA()()()}if(2&e){const n=t.oxw();t.xp6(8),t.Oqu(n.data.name)}}let b=(()=>{class e{constructor(n,a,o,r,f){this.dialogRef=n,this.data=a,this.store=o,this.formBuilder=r,this._snackBar=f,this.action="Ok",this.snackbarDuration=3e3,this.messageForm=this.formBuilder.group({name:new l.NI("",[l.kI.required]),text:new l.NI("",[l.kI.required,l.kI.maxLength(255)])}),this.destroy$=new T.x,a&&(this.messageData=a)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}onSubmit(){this.messageForm.valid&&(this.store.dispatch(u.tn({message:this.messageForm.value})),this.setResultText(),this.closeDialog())}deleteMessage(){this.store.dispatch(u.$Z({messageId:this.messageData.id})),this.setResultText(),this.closeDialog()}closeDialog(){this.formReference?.resetForm(),this.dialogRef.close()}openSnackBar(n,a){this._snackBar.open(n,a,{duration:this.snackbarDuration})}setResultText(){this.store.select(D).subscribe(n=>{this.openSnackBar(n.resultText?n.resultText:n.error,this.action)})}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(m.so),t.Y36(m.WI),t.Y36(g.yh),t.Y36(l.qu),t.Y36(P.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-dialog-box"]],viewQuery:function(a,o){if(1&a&&t.Gf(A,5),2&a){let r;t.iGM(r=t.CRH())&&(o.formReference=r.first)}},decls:2,vars:2,consts:[["class","create-message",4,"ngIf"],["class","delete-message",4,"ngIf"],[1,"create-message"],["mat-dialog-title",""],[1,"btn-close-wrapper"],["mat-button","",1,"btn","btn-close",3,"click"],["mat-dialog-content","",1,"container"],[1,"card-body"],[1,"form",3,"formGroup","ngSubmit"],["appearance","outline",1,"name","field"],["matInput","","value","","formControlName","name"],["class","text-danger",4,"ngIf"],["appearance","outline",1,"text","field"],["matInput","","cdkTextareaAutosize","","placeholder","Write your message here...","value","","formControlName","text","cdkAutosizeMinRows","7","cdkAutosizeMaxRows","10"],["autosize","cdkTextareaAutosize"],[1,"button-wrapper"],["mat-raised-button","","color","primary","type","submit",1,"btn","btn-submit",3,"disabled"],["mat-raised-button","",1,"btn","btn-cancel",3,"click"],[1,"text-danger"],[1,"delete-message"],["mat-dialog-content",""],["mat-dialog-actions","",1,"button-wrapper-delete"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","",3,"click"]],template:function(a,o){1&a&&(t.YNc(0,S,25,5,"div",0),t.YNc(1,k,15,1,"div",1)),2&a&&(t.Q6J("ngIf",!o.messageData),t.xp6(1),t.Q6J("ngIf",o.messageData))},dependencies:[h.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,Z.lW,x.KE,x.hX,x.TO,w.Nt,O.IC,m.uh,m.xY,m.H8],styles:[".button-wrapper[_ngcontent-%COMP%]{margin-top:38px;gap:20px;display:flex;justify-content:center}.btn-cancel[_ngcontent-%COMP%]{left:53%;margin-top:-18%}.btn-submit[_ngcontent-%COMP%]{margin-right:30%;margin-top:-5%}.btn-close[_ngcontent-%COMP%]{font-size:25px;text-align:center}.btn-close-wrapper[_ngcontent-%COMP%]{position:absolute;right:45px;top:15px;width:30px;height:30px}.button-wrapper-delete[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:10px;gap:20px}.card-body[_ngcontent-%COMP%]{margin:0 5%}.name.field[_ngcontent-%COMP%]{margin-bottom:10px}mat-form-field[_ngcontent-%COMP%]{width:400px}.text[_ngcontent-%COMP%]{height:200px}button[_ngcontent-%COMP%]{margin-bottom:10px}.card-body[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}"]})}return e})();var Y=s(617);function F(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," ID "),t.qZA())}function I(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function J(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1," Creation Date "),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.date,"medium")," ")}}function R(e,i){1&e&&(t.TgZ(0,"th",30),t._uU(1," Name "),t.qZA())}function H(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.name)}}function z(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1," Message Text "),t.qZA())}function q(e,i){if(1&e&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&e){const n=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.showMessageText(n.text)," ")}}function $(e,i){1&e&&(t.TgZ(0,"th",33),t._uU(1," Action "),t.qZA())}function G(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",34)(1,"div",35)(2,"button",36),t.NdJ("click",function(){const r=t.CHM(n).$implicit,f=t.oxw();return t.KtG(f.openDialog(r))}),t.TgZ(3,"div",5)(4,"mat-icon"),t._uU(5,"delete"),t.qZA()()()()()}}function L(e,i){1&e&&t._UZ(0,"tr",37)}function W(e,i){1&e&&t._UZ(0,"tr",38)}function j(e,i){1&e&&(t.ynx(0,39),t.TgZ(1,"h2"),t._uU(2,"There's no message yet"),t.qZA(),t.BQk())}const K=function(){return[5,10,20,50]};let E=(()=>{class e{constructor(n,a){this.dialog=n,this.store=a,this.displayedColumns=["id","date","name","text","action"],this.dataSource$=this.store.select(y),this.dataSource=new c.by([]),this.maxMessageLength=100,this.dialogDeleteWidth="400px",this.dialogCreateWidth="500px",this.dialogCreateHeight="510px",this.page=0,this.pageSize=5,this.destroy$=new T.x}ngOnInit(){this.store.dispatch(u._U()),this.dataSource$.pipe((0,v.R)(this.destroy$)).subscribe(n=>{this.dataSource.data=n,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.paginator&&(this.paginator.pageIndex=this.page,this.paginator.pageSize=this.pageSize)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}openDialog(n=null){this.dialog.open(b,n?{width:this.dialogDeleteWidth,data:n}:{width:this.dialogCreateWidth,height:this.dialogCreateHeight})}showMessageText(n){return n.length<=this.maxMessageLength?n:`${n.substring(0,this.maxMessageLength)}...`}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(m.uw),t.Y36(g.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-messages-page"]],viewQuery:function(a,o){if(1&a&&(t.Gf(M.NW,5),t.Gf(d.YE,5)),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:34,vars:6,consts:[[1,"title-wrapper"],[1,"title-holder"],[1,"list-title"],["id","wrapper"],["mat--raised-button","","color","primary","mat-flat-button","",1,"go-to-create-page",3,"click"],[1,"mat-icon"],[1,"table-holder"],[1,"container","table"],["matSort","","matSortActive","date","matSortDirection","desc",1,"message-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["class","header id-column","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["class","header date-column","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["class","header name-column","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","text"],["class","header text-column","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-column-cell",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","header action-column",4,"matHeaderCellDef"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-message",4,"ngIf"],[3,"pageSizeOptions"],["id","warning-message"],["mat-header-cell","",1,"header","id-column"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"header","date-column"],["mat-header-cell","",1,"header","name-column"],["mat-header-cell","",1,"header","text-column"],["mat-cell","",1,"text-column-cell"],["mat-header-cell","",1,"header","action-column"],["mat-cell","",1,"action-link"],[1,"btn-wrapper"],["mat-raised-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-message"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Message Box"),t.qZA()()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.openDialog()}),t.TgZ(6,"div",5)(7,"mat-icon"),t._uU(8,"send"),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"div")(12,"mat-table",8),t.ynx(13,9),t.YNc(14,F,2,0,"th",10),t.YNc(15,I,2,1,"td",11),t.BQk(),t.ynx(16,12),t.YNc(17,J,2,0,"th",13),t.YNc(18,Q,3,4,"td",11),t.BQk(),t.ynx(19,14),t.YNc(20,R,2,0,"th",15),t.YNc(21,H,2,1,"td",11),t.BQk(),t.ynx(22,16),t.YNc(23,z,2,0,"th",17),t.YNc(24,q,2,1,"td",18),t.BQk(),t.ynx(25,19),t.YNc(26,$,2,0,"th",20),t.YNc(27,G,6,0,"td",21),t.BQk(),t.YNc(28,L,1,0,"tr",22),t.YNc(29,W,1,0,"tr",23),t.qZA(),t.YNc(30,j,3,0,"ng-container",24),t._UZ(31,"mat-paginator",25),t.qZA()()()(),t.TgZ(32,"div",26),t._uU(33,"This page is only viewable in landscape mode"),t.qZA()),2&a&&(t.xp6(12),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===o.dataSource.data.length),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,K)))},dependencies:[h.O5,Z.lW,Y.Hw,d.YE,d.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,M.NW,h.uU],styles:["#warning-message[_ngcontent-%COMP%]{display:none}@media only screen and (orientation: portrait){#wrapper[_ngcontent-%COMP%]{display:none}#warning-message[_ngcontent-%COMP%]{display:inline-flex;margin:30% 20%;text-align:center}}@media only screen and (orientation: landscape){#warning-message[_ngcontent-%COMP%]{display:none}}.list-title[_ngcontent-%COMP%]{float:left;margin:50px 80px}.table-holder[_ngcontent-%COMP%]{display:table;width:90%;margin:5%}.go-to-create-page[_ngcontent-%COMP%]{float:right;margin:50px 100px}.container[_ngcontent-%COMP%]{margin-bottom:50px}mat-table[_ngcontent-%COMP%]{width:100%;display:table}.header[_ngcontent-%COMP%]{font-size:20px}button[_ngcontent-%COMP%]{margin:5px}td[_ngcontent-%COMP%]{text-align:center;padding:10px}th[_ngcontent-%COMP%]{text-align:center;padding:30px}.text-column-cell[_ngcontent-%COMP%]{max-width:300px;max-height:300px;overflow-wrap:break-word}.id-column[_ngcontent-%COMP%], .date-column[_ngcontent-%COMP%]{width:15%}.name-column[_ngcontent-%COMP%], .text-column[_ngcontent-%COMP%]{width:20%}.action-column[_ngcontent-%COMP%]{width:10%}h2[_ngcontent-%COMP%]{margin:50px 40%}.mat-icon[_ngcontent-%COMP%]{display:flex;flex-wrap:initial}"]})}return e})();const V=[{path:s(5030).w,component:E}];let tt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(V),C.Bz]})}return e})()}}]);